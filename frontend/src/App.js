import { useState, useEffect } from 'react';
import { uploadEssay, getEssay } from '@/lib/api';
import { Loader2, Upload, FileText, CheckCircle2, AlertCircle } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Textarea } from '@/components/ui/textarea';
function App() {
    const [essayText, setEssayText] = useState('');
    const [essayId, setEssayId] = useState(null);
    const [essayData, setEssayData] = useState(null);
    const [isUploading, setIsUploading] = useState(false);
    const [isPolling, setIsPolling] = useState(false);
    const [error, setError] = useState(null);
    const handleSubmit = async (e) => {
        e.preventDefault();
        if (!essayText.trim()) {
            setError('Please enter some essay text');
            return;
        }
        setIsUploading(true);
        setError(null);
        setEssayData(null);
        try {
            const response = await uploadEssay(essayText);
            setEssayId(response.essay_id);
            setEssayData(response);
            setIsPolling(true);
        }
        catch (err) {
            setError(err instanceof Error ? err.message : 'Failed to upload essay');
        }
        finally {
            setIsUploading(false);
        }
    };
    useEffect(() => {
        if (!essayId || !isPolling)
            return;
        const pollInterval = setInterval(async () => {
            try {
                const data = await getEssay(essayId);
                setEssayData(data);
                if (data.status === 'processed') {
                    setIsPolling(false);
                    clearInterval(pollInterval);
                }
            }
            catch (err) {
                setError(err instanceof Error ? err.message : 'Failed to fetch essay status');
                setIsPolling(false);
                clearInterval(pollInterval);
            }
        }, 3000); // Poll every 3 seconds
        return () => clearInterval(pollInterval);
    }, [essayId, isPolling]);
    return (<div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8">
      <div className="max-w-4xl mx-auto">
        <Card className="shadow-xl">
          <CardHeader>
            <CardTitle className="text-4xl">Vocabulary Essay Analyzer</CardTitle>
            <CardDescription className="text-base">
              Upload your essay to receive vocabulary analysis and feedback
            </CardDescription>
          </CardHeader>
          <CardContent>
            {error && (<Alert variant="destructive" className="mb-6">
                <AlertCircle className="h-4 w-4"/>
                <AlertDescription>{error}</AlertDescription>
              </Alert>)}

            {!essayData ? (<form onSubmit={handleSubmit} className="space-y-6">
                <div className="space-y-2">
                  <label htmlFor="essay" className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">
                    Essay Text
                  </label>
                  <Textarea id="essay" rows={12} value={essayText} onChange={(e) => setEssayText(e.target.value)} placeholder="Paste your essay here..." disabled={isUploading}/>
                </div>
                <Button type="submit" disabled={isUploading || !essayText.trim()} className="w-full" size="lg">
                  {isUploading ? (<>
                      <Loader2 className="h-4 w-4 animate-spin"/>
                      Uploading...
                    </>) : (<>
                      <Upload className="h-4 w-4"/>
                      Analyze Essay
                    </>)}
                </Button>
              </form>) : (<div className="space-y-6">
                {/* Status Indicator */}
                <Alert className={essayData.status === 'processed' ? 'border-green-500 bg-green-50' : 'border-blue-500 bg-blue-50'}>
                  <div className="flex items-center gap-3">
                    {essayData.status === 'processed' ? (<>
                        <CheckCircle2 className="h-5 w-5 text-green-600"/>
                        <div>
                          <p className="font-medium text-green-800">Processing Complete</p>
                          <p className="text-sm text-green-600">Your essay has been analyzed</p>
                        </div>
                      </>) : (<>
                        <Loader2 className="h-5 w-5 text-blue-600 animate-spin"/>
                        <div>
                          <p className="font-medium text-blue-800">
                            {essayData.status === 'processing' ? 'Processing...' : 'Queued for Processing'}
                          </p>
                          <p className="text-sm text-blue-600">
                            {essayData.status === 'processing'
                    ? 'Analyzing your essay with AI'
                    : 'Your essay is in the queue'}
                          </p>
                        </div>
                      </>)}
                  </div>
                </Alert>

                {/* Metrics */}
                {essayData.metrics && (<Card>
                    <CardHeader>
                      <CardTitle className="flex items-center gap-2">
                        <FileText className="h-6 w-6"/>
                        Metrics
                      </CardTitle>
                    </CardHeader>
                    <CardContent>
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div className="bg-muted p-4 rounded-lg">
                          <p className="text-sm text-muted-foreground">Word Count</p>
                          <p className="text-2xl font-bold">{essayData.metrics.word_count}</p>
                        </div>
                        <div className="bg-muted p-4 rounded-lg">
                          <p className="text-sm text-muted-foreground">Unique Words</p>
                          <p className="text-2xl font-bold">{essayData.metrics.unique_words}</p>
                        </div>
                        <div className="bg-muted p-4 rounded-lg">
                          <p className="text-sm text-muted-foreground">Type-Token Ratio</p>
                          <p className="text-2xl font-bold">
                            {essayData.metrics.type_token_ratio.toFixed(2)}
                          </p>
                        </div>
                        {essayData.metrics.avg_word_freq_rank && (<div className="bg-muted p-4 rounded-lg">
                            <p className="text-sm text-muted-foreground">Avg Frequency Rank</p>
                            <p className="text-2xl font-bold">
                              {Math.round(essayData.metrics.avg_word_freq_rank)}
                            </p>
                          </div>)}
                      </div>
                      {essayData.metrics.noun_ratio && (<div className="mt-4 pt-4 border-t">
                          <p className="text-sm font-medium mb-2">Part of Speech Distribution</p>
                          <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <div>
                              <p className="text-xs text-muted-foreground">Nouns</p>
                              <p className="text-lg font-semibold">{(essayData.metrics.noun_ratio * 100).toFixed(1)}%</p>
                            </div>
                            <div>
                              <p className="text-xs text-muted-foreground">Verbs</p>
                              <p className="text-lg font-semibold">{(essayData.metrics.verb_ratio * 100).toFixed(1)}%</p>
                            </div>
                            {essayData.metrics.adj_ratio && (<div>
                                <p className="text-xs text-muted-foreground">Adjectives</p>
                                <p className="text-lg font-semibold">{(essayData.metrics.adj_ratio * 100).toFixed(1)}%</p>
                              </div>)}
                            {essayData.metrics.adv_ratio && (<div>
                                <p className="text-xs text-muted-foreground">Adverbs</p>
                                <p className="text-lg font-semibold">{(essayData.metrics.adv_ratio * 100).toFixed(1)}%</p>
                              </div>)}
                          </div>
                        </div>)}
                    </CardContent>
                  </Card>)}

                {/* Feedback */}
                {essayData.feedback && essayData.feedback.length > 0 && (<Card>
                    <CardHeader>
                      <CardTitle>Word-Level Feedback</CardTitle>
                    </CardHeader>
                    <CardContent>
                      <div className="space-y-3">
                        {essayData.feedback.map((item, index) => (<Alert key={index} variant={item.correct ? 'default' : 'destructive'} className={item.correct ? 'border-green-500 bg-green-50' : ''}>
                            <div className="flex-1">
                              <p className="font-semibold">
                                <span className="text-lg">{item.word}</span>
                                <span className={`ml-2 text-sm ${item.correct ? 'text-green-700' : 'text-red-700'}`}>
                                  {item.correct ? '✓ Correct' : '✗ Incorrect'}
                                </span>
                              </p>
                              {item.comment && (<AlertDescription className="mt-2">
                                  {item.comment}
                                </AlertDescription>)}
                            </div>
                          </Alert>))}
                      </div>
                    </CardContent>
                  </Card>)}

                {/* Reset Button */}
                <Button onClick={() => {
                setEssayText('');
                setEssayId(null);
                setEssayData(null);
                setError(null);
                setIsPolling(false);
            }} variant="secondary" className="w-full" size="lg">
                  Analyze Another Essay
                </Button>
              </div>)}
          </CardContent>
        </Card>
      </div>
    </div>);
}
export default App;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQXBwLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLE9BQU8sQ0FBQTtBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBc0IsTUFBTSxXQUFXLENBQUE7QUFDckUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFDbkYsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHdCQUF3QixDQUFBO0FBQy9DLE9BQU8sRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE1BQU0sc0JBQXNCLENBQUE7QUFDaEcsT0FBTyxFQUFFLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHVCQUF1QixDQUFBO0FBQy9ELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQTtBQUVuRCxTQUFTLEdBQUc7SUFDVixNQUFNLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUM5QyxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLFFBQVEsQ0FBZ0IsSUFBSSxDQUFDLENBQUE7SUFDM0QsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsR0FBRyxRQUFRLENBQXVCLElBQUksQ0FBQyxDQUFBO0lBQ3RFLE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQ3JELE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQ2pELE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsUUFBUSxDQUFnQixJQUFJ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RSxXQUFXLENBQ2Y7UUFBQSxFQUFFLElBQUksQ0FDUjtNQUFBLEVBQUUsR0FBRyxDQUNQO0lBQUEsRUFBRSxHQUFHLENBQUMsQ0FDUCxDQUFBO0FBQ0gsQ0FBQztBQUVELGVBQWUsR0FBRyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXBsb2FkRXNzYXksIGdldEVzc2F5LCB0eXBlIEVzc2F5UmVzcG9uc2UgfSBmcm9tICdAL2xpYi9hcGknXG5pbXBvcnQgeyBMb2FkZXIyLCBVcGxvYWQsIEZpbGVUZXh0LCBDaGVja0NpcmNsZTIsIEFsZXJ0Q2lyY2xlIH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbidcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkRGVzY3JpcHRpb24sIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJ1xuaW1wb3J0IHsgQWxlcnQsIEFsZXJ0RGVzY3JpcHRpb24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYWxlcnQnXG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90ZXh0YXJlYSdcblxuZnVuY3Rpb24gQXBwKCkge1xuICBjb25zdCBbZXNzYXlUZXh0LCBzZXRFc3NheVRleHRdID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IFtlc3NheUlkLCBzZXRFc3NheUlkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtlc3NheURhdGEsIHNldEVzc2F5RGF0YV0gPSB1c2VTdGF0ZTxFc3NheVJlc3BvbnNlIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2lzVXBsb2FkaW5nLCBzZXRJc1VwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2lzUG9sbGluZywgc2V0SXNQb2xsaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGlmICghZXNzYXlUZXh0LnRyaW0oKSkge1xuICAgICAgc2V0RXJyb3IoJ1BsZWFzZSBlbnRlciBzb21lIGVzc2F5IHRleHQnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0SXNVcGxvYWRpbmcodHJ1ZSlcbiAgICBzZXRFcnJvcihudWxsKVxuICAgIHNldEVzc2F5RGF0YShudWxsKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBsb2FkRXNzYXkoZXNzYXlUZXh0KVxuICAgICAgc2V0RXNzYXlJZChyZXNwb25zZS5lc3NheV9pZClcbiAgICAgIHNldEVzc2F5RGF0YShyZXNwb25zZSlcbiAgICAgIHNldElzUG9sbGluZyh0cnVlKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBsb2FkIGVzc2F5JylcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNVcGxvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWVzc2F5SWQgfHwgIWlzUG9sbGluZykgcmV0dXJuXG5cbiAgICBjb25zdCBwb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RXNzYXkoZXNzYXlJZClcbiAgICAgICAgc2V0RXNzYXlEYXRhKGRhdGEpXG5cbiAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAncHJvY2Vzc2VkJykge1xuICAgICAgICAgIHNldElzUG9sbGluZyhmYWxzZSlcbiAgICAgICAgICBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbClcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIGVzc2F5IHN0YXR1cycpXG4gICAgICAgIHNldElzUG9sbGluZyhmYWxzZSlcbiAgICAgICAgY2xlYXJJbnRlcnZhbChwb2xsSW50ZXJ2YWwpXG4gICAgICB9XG4gICAgfSwgMzAwMCkgLy8gUG9sbCBldmVyeSAzIHNlY29uZHNcblxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbClcbiAgfSwgW2Vzc2F5SWQsIGlzUG9sbGluZ10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1ncmFkaWVudC10by1iciBmcm9tLWJsdWUtNTAgdG8taW5kaWdvLTEwMCBweS0xMiBweC00IHNtOnB4LTYgbGc6cHgtOFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy00eGwgbXgtYXV0b1wiPlxuICAgICAgICA8Q2FyZCBjbGFzc05hbWU9XCJzaGFkb3cteGxcIj5cbiAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwidGV4dC00eGxcIj5Wb2NhYnVsYXJ5IEVzc2F5IEFuYWx5emVyPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICA8Q2FyZERlc2NyaXB0aW9uIGNsYXNzTmFtZT1cInRleHQtYmFzZVwiPlxuICAgICAgICAgICAgICBVcGxvYWQgeW91ciBlc3NheSB0byByZWNlaXZlIHZvY2FidWxhcnkgYW5hbHlzaXMgYW5kIGZlZWRiYWNrXG4gICAgICAgICAgICA8L0NhcmREZXNjcmlwdGlvbj5cbiAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICAgICAgPEFsZXJ0IHZhcmlhbnQ9XCJkZXN0cnVjdGl2ZVwiIGNsYXNzTmFtZT1cIm1iLTZcIj5cbiAgICAgICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgICAgPEFsZXJ0RGVzY3JpcHRpb24+e2Vycm9yfTwvQWxlcnREZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgPC9BbGVydD5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHshZXNzYXlEYXRhID8gKFxuICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJlc3NheVwiIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbGVhZGluZy1ub25lIHBlZXItZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHBlZXItZGlzYWJsZWQ6b3BhY2l0eS03MFwiPlxuICAgICAgICAgICAgICAgICAgICBFc3NheSBUZXh0XG4gICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiZXNzYXlcIlxuICAgICAgICAgICAgICAgICAgICByb3dzPXsxMn1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Vzc2F5VGV4dH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRFc3NheVRleHQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBhc3RlIHlvdXIgZXNzYXkgaGVyZS4uLlwiXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwbG9hZGluZ31cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17aXNVcGxvYWRpbmcgfHwgIWVzc2F5VGV4dC50cmltKCl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgc2l6ZT1cImxnXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7aXNVcGxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIFVwbG9hZGluZy4uLlxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICBBbmFseXplIEVzc2F5XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgICAgICAgICAgICB7LyogU3RhdHVzIEluZGljYXRvciAqL31cbiAgICAgICAgICAgICAgICA8QWxlcnQgY2xhc3NOYW1lPXtlc3NheURhdGEuc3RhdHVzID09PSAncHJvY2Vzc2VkJyA/ICdib3JkZXItZ3JlZW4tNTAwIGJnLWdyZWVuLTUwJyA6ICdib3JkZXItYmx1ZS01MDAgYmctYmx1ZS01MCd9PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgICB7ZXNzYXlEYXRhLnN0YXR1cyA9PT0gJ3Byb2Nlc3NlZCcgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja0NpcmNsZTIgY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LWdyZWVuLTYwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWdyZWVuLTgwMFwiPlByb2Nlc3NpbmcgQ29tcGxldGU8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmVlbi02MDBcIj5Zb3VyIGVzc2F5IGhhcyBiZWVuIGFuYWx5emVkPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC1ibHVlLTYwMCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ibHVlLTgwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlc3NheURhdGEuc3RhdHVzID09PSAncHJvY2Vzc2luZycgPyAnUHJvY2Vzc2luZy4uLicgOiAnUXVldWVkIGZvciBQcm9jZXNzaW5nJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXNzYXlEYXRhLnN0YXR1cyA9PT0gJ3Byb2Nlc3NpbmcnIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnQW5hbHl6aW5nIHlvdXIgZXNzYXkgd2l0aCBBSScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdZb3VyIGVzc2F5IGlzIGluIHRoZSBxdWV1ZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9BbGVydD5cblxuICAgICAgICAgICAgICAgIHsvKiBNZXRyaWNzICovfVxuICAgICAgICAgICAgICAgIHtlc3NheURhdGEubWV0cmljcyAmJiAoXG4gICAgICAgICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT1cImgtNiB3LTZcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgTWV0cmljc1xuICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgbWQ6Z3JpZC1jb2xzLTQgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcC00IHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5Xb3JkIENvdW50PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGRcIj57ZXNzYXlEYXRhLm1ldHJpY3Mud29yZF9jb3VudH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcC00IHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5VbmlxdWUgV29yZHM8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZFwiPntlc3NheURhdGEubWV0cmljcy51bmlxdWVfd29yZHN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLW11dGVkIHAtNCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+VHlwZS1Ub2tlbiBSYXRpbzwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vzc2F5RGF0YS5tZXRyaWNzLnR5cGVfdG9rZW5fcmF0aW8udG9GaXhlZCgyKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXNzYXlEYXRhLm1ldHJpY3MuYXZnX3dvcmRfZnJlcV9yYW5rICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1tdXRlZCBwLTQgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+QXZnIEZyZXF1ZW5jeSBSYW5rPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge01hdGgucm91bmQoZXNzYXlEYXRhLm1ldHJpY3MuYXZnX3dvcmRfZnJlcV9yYW5rKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICB7ZXNzYXlEYXRhLm1ldHJpY3Mubm91bl9yYXRpbyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcHQtNCBib3JkZXItdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIG1iLTJcIj5QYXJ0IG9mIFNwZWVjaCBEaXN0cmlidXRpb248L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBtZDpncmlkLWNvbHMtNCBnYXAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPk5vdW5zPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkXCI+eyhlc3NheURhdGEubWV0cmljcy5ub3VuX3JhdGlvICogMTAwKS50b0ZpeGVkKDEpfSU8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+VmVyYnM8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGRcIj57KGVzc2F5RGF0YS5tZXRyaWNzLnZlcmJfcmF0aW8hICogMTAwKS50b0ZpeGVkKDEpfSU8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vzc2F5RGF0YS5tZXRyaWNzLmFkal9yYXRpbyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPkFkamVjdGl2ZXM8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZFwiPnsoZXNzYXlEYXRhLm1ldHJpY3MuYWRqX3JhdGlvICogMTAwKS50b0ZpeGVkKDEpfSU8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlc3NheURhdGEubWV0cmljcy5hZHZfcmF0aW8gJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5BZHZlcmJzPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGRcIj57KGVzc2F5RGF0YS5tZXRyaWNzLmFkdl9yYXRpbyAqIDEwMCkudG9GaXhlZCgxKX0lPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICB7LyogRmVlZGJhY2sgKi99XG4gICAgICAgICAgICAgICAge2Vzc2F5RGF0YS5mZWVkYmFjayAmJiBlc3NheURhdGEuZmVlZGJhY2subGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPENhcmRUaXRsZT5Xb3JkLUxldmVsIEZlZWRiYWNrPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZXNzYXlEYXRhLmZlZWRiYWNrLm1hcCgoaXRlbSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEFsZXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtpdGVtLmNvcnJlY3QgPyAnZGVmYXVsdCcgOiAnZGVzdHJ1Y3RpdmUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17aXRlbS5jb3JyZWN0ID8gJ2JvcmRlci1ncmVlbi01MDAgYmctZ3JlZW4tNTAnIDogJyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+e2l0ZW0ud29yZH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YG1sLTIgdGV4dC1zbSAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY29ycmVjdCA/ICd0ZXh0LWdyZWVuLTcwMCcgOiAndGV4dC1yZWQtNzAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0uY29ycmVjdCA/ICfinJMgQ29ycmVjdCcgOiAn4pyXIEluY29ycmVjdCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLmNvbW1lbnQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWxlcnREZXNjcmlwdGlvbiBjbGFzc05hbWU9XCJtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2l0ZW0uY29tbWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9BbGVydERlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9BbGVydD5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICB7LyogUmVzZXQgQnV0dG9uICovfVxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0RXNzYXlUZXh0KCcnKVxuICAgICAgICAgICAgICAgICAgICBzZXRFc3NheUlkKG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHNldEVzc2F5RGF0YShudWxsKVxuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcihudWxsKVxuICAgICAgICAgICAgICAgICAgICBzZXRJc1BvbGxpbmcoZmFsc2UpXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgc2l6ZT1cImxnXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBBbmFseXplIEFub3RoZXIgRXNzYXlcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgIDwvQ2FyZD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcFxuIl19